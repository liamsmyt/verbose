<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Text Processor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <link href="https://unpkg.com/vis-graph3d@latest/dist/vis-graph3d.min.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="https://unpkg.com/vis-graph3d@latest/dist/vis-graph3d.min.js"></script>


<script type="text/javascript">
    var data = null;
    var graph3d = null;
    var mean_valence = parseFloat("{{ mean_valence }}") || 0;
    var mean_arousal = parseFloat("{{ mean_arousal }}") || 0;
    var mean_dominance = parseFloat("{{ mean_dominance }}") || 0;
    list = [[mean_valence, 0, 0], [0, mean_arousal, 0], [0, 0, mean_dominance]], [mean_valence, mean_arousal, mean_dominance];

    // Called when the Visualization API is loaded.
    function drawVisualization() {

        // Create and populate a data table.
        var data = new vis.DataSet();
        for (var i = 0; i < list.length; i++) {
                let opacity = (i < 3) ? 0.5 : 1;  // 50% opacity for non-composite values, full opacity for composite
                data.add({
                    x: list[i][0],
                    y: list[i][1],
                    z: list[i][2],
                    style: {
                        "fill": "#FF5733",
                        "stroke": "#990000",
                        "strokeWidth": 2,
                        "opacity": opacity // Set opacity here
                    }
                });
            }


        // specify options
        var options = {
            width: '500px',  // Increased width for better visibility
            height: '500px', // Increased height for better visibility
            style: 'dot-line',
            backgroundColor: '#F0F0F0', // Softer background color
            axisColor: '#AABBCC',
            showXAxis: true,
            showYAxis: true,
            showZAxis: true,
            showPerspective: true,
            showGrid: true, // Enable grid for easy readability
            showShadow: false,
            keepAspectRatio: true,
            verticalRatio: 0.6, // Adjusted ratio for better viewing angles
            dotSizeRatio: 0.02, // Increased dot size for visibility
            rotateAxisLabels: true,
            xLabel: 'Valence',
            yLabel: 'Arousal',
            zLabel: 'Dominance',
            xMin: -1,
            xMax: 1,
            yMin: -1,
            yMax: 1,
            zMin: -1,
            zMax: 1,
            xStep: 0.5,
            yStep: 0.5,
            zStep: 0.5
        };


        // create a graph3d
        var container = document.getElementById('mygraph');
        graph3d = new vis.Graph3d(container, data, options);

        // Start rotation after graph renders
        setTimeout(function() {
            var angle = 1.0;

            setInterval(function() {
                angle += 0.01; // Slower rotation for ease of viewing
                if (angle >= 0.5) {
                    angle = 0;
                }

                graph3d.setCameraPosition({
                    horizontal: angle,
                    vertical: 0.5,
                    distance: 2 // Increased distance for better view
                });
            }, 100);
        }, 1000);
    }
</script>



</head>
<body onload="drawVisualization();" class="min-h-screen bg-gray-900" >
  <div class="container mt-5 bg-black">

  <div id="mygraph"></div>


    <h1 class="text-center">--- Verbose ---</h1>
    <form id="textForm">
        <div class="form-group">
            <label for="text_input">Enter your text:</label>
            <textarea class="form-control" id="text_input" name="text_input" rows="10" placeholder="Enter your text here..." required></textarea>
        </div>
        <!-- Button is optional now since it auto-submits -->
        <button type="submit" class="btn btn-primary mt-2">Process Text</button>
    </form>

    <div class="col-md-12 bg-black p-4 mt-4">
      <div class="row">
      <div class="col-md-3 bg-gray-400">
      <h4 class="mt-4 display-4">Kuperman's Age of Acquisition</h1>
      </div>
      <div class="col-md-3 bg-gray-300 d-flex justify-content-center align-items-center">
          <p class="display-2">{{ mean_aoa }}</p>
  </div>

  </div>

    </div>

    <h4 class="mt-4">Concreteness</h4>  <!-- Correct closing tag -->
    <div class="ms-4">
      <p class="">mean = {{ mean_conc }}</p>
    </div>

    <h4 class="mt-4">VAD</h4>  <!-- Correct closing tag -->
    <div class="ms-4">
      <p class="">mean valence = {{ mean_valence }}</p>
      <p class="">mean arousal = {{ mean_arousal }}</p>
      <p class="">mean arousal = {{ mean_dominance }}</p>
    </div>

</div>
</body>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</html>
